<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teas and Seas - Interactive T&C Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.24/dist/full.min.css" rel="stylesheet" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'Fira Code', 'monospace']
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass {
            backdrop-filter: blur(16px) saturate(180%);
            background-color: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.125);
        }
        .clause-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1rem;
        }
        .preview-content {
            font-family: 'Georgia', 'Times New Roman', serif;
            line-height: 1.8;
        }
        .floating-action {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 50;
        }
        .badge-glow {
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }
        .scroll-smooth {
            scroll-behavior: smooth;
        }
        .preview-content h1 {
            border-bottom: 2px solid currentColor;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        .preview-content h2 {
            border-bottom: 1px solid currentColor;
            padding-bottom: 0.25rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .preview-content h3 {
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        .preview-content hr {
            margin: 2rem 0;
            border-top: 2px dashed currentColor;
            opacity: 0.3;
        }
        .preview-content blockquote {
            border-left: 4px solid currentColor;
            padding-left: 1rem;
            margin: 1rem 0;
            opacity: 0.8;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 scroll-smooth">
    <!-- Navigation -->
    <div class="navbar glass sticky top-0 z-40 shadow-lg">
        <div class="navbar-start">
            <div class="text-xl font-bold text-primary">
                <i class="fas fa-tea mr-2"></i>
                Teas & Seas
            </div>
        </div>
        <div class="navbar-center hidden lg:flex">
            <ul class="menu menu-horizontal px-1 font-medium">
                <li><a href="#builder" class="hover:text-primary">Builder</a></li>
                <li><a href="#preview" class="hover:text-primary">Preview</a></li>
                <li><a href="#badge" class="hover:text-primary">Badge</a></li>
                <li><a href="https://github.com/cartesive/teas-and-seas" target="_blank" class="hover:text-primary">
                    <i class="fab fa-github mr-2"></i>GitHub
                </a></li>
            </ul>
        </div>
        <div class="navbar-end">
            <div class="dropdown dropdown-end lg:hidden">
                <div tabindex="0" role="button" class="btn btn-ghost">
                    <i class="fas fa-bars"></i>
                </div>
                <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52">
                    <li><a href="#builder">Builder</a></li>
                    <li><a href="#preview">Preview</a></li>
                    <li><a href="#badge">Badge</a></li>
                    <li><a href="https://github.com/cartesive/teas-and-seas" target="_blank">GitHub</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <div class="hero min-h-[60vh] gradient-bg relative overflow-hidden">
        <div class="hero-overlay bg-opacity-30"></div>
        <div class="hero-content text-center text-white relative z-10">
            <div class="max-w-md">
                <h1 class="mb-5 text-5xl font-bold">
                    <i class="fas fa-gavel mr-3"></i>
                    Interactive T&C Builder
                </h1>
                <p class="mb-5 text-xl font-light">
                    Create standardized, user-friendly Terms & Conditions with our level-based system
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="#builder" class="btn btn-white btn-lg gap-2">
                        <i class="fas fa-play"></i>
                        Start Building
                    </a>
                    <a href="https://github.com/cartesive/teas-and-seas" target="_blank" class="btn btn-outline btn-white btn-lg gap-2">
                        <i class="fab fa-github"></i>
                        View Project
                    </a>
                </div>
            </div>
        </div>
        <!-- Floating elements for visual appeal -->
        <div class="absolute top-20 left-10 w-20 h-20 bg-white opacity-10 rounded-full animate-bounce delay-700"></div>
        <div class="absolute bottom-20 right-10 w-16 h-16 bg-white opacity-10 rounded-full animate-bounce delay-300"></div>
        <div class="absolute top-40 right-20 w-12 h-12 bg-white opacity-10 rounded-full animate-bounce delay-1000"></div>
    </div>

    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Badge Generator Section -->
        <section id="badge" class="mb-12">
            <div class="card glass shadow-2xl">
                <div class="card-body">
                    <div class="flex items-center mb-6">
                        <div class="avatar placeholder mr-4">
                            <div class="bg-primary text-primary-content rounded-full w-12">
                                <i class="fas fa-tag text-xl"></i>
                            </div>
                        </div>
                        <div>
                            <h2 class="card-title text-2xl">T&C Badge Generator</h2>
                            <p class="text-base-content/70">Create a compact badge representing your configuration</p>
                        </div>
                    </div>
                    
                    <div class="bg-base-200 p-6 rounded-xl mb-6">
                        <div class="text-center">
                            <div class="text-sm text-base-content/60 mb-2">Your T&C Badge:</div>
                            <div id="badge-display" class="mb-4">
                                <div class="inline-block gradient-bg text-white px-6 py-3 rounded-full font-mono font-bold text-lg shadow-lg badge-glow cursor-pointer transition-transform hover:scale-105" id="generated-badge">
                                    P3-L3-W3-T3-AU3-UC3-PAY3-IP3-D3-C3-AGE3-S3
                                </div>
                            </div>
                            <div class="flex flex-wrap gap-3 justify-center">
                                <button class="btn btn-primary gap-2" onclick="copyBadge()">
                                    <i class="fas fa-copy"></i>
                                    Copy Badge
                                </button>
                                <button class="btn btn-secondary gap-2" onclick="generateFullDocument()">
                                    <i class="fas fa-file-alt"></i>
                                    Generate T&C
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Badge Expander -->
                    <div class="divider">Badge Expander</div>
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-medium">
                                <i class="fas fa-search mr-2"></i>
                                Paste a T&C badge to expand it into the full document
                            </span>
                        </label>
                        <div class="input-group">
                            <input type="text" 
                                   class="input input-bordered flex-1 font-mono" 
                                   id="badge-input" 
                                   placeholder="P3-L7-W2-T5-AU4-UC6-PAY8-IP5-D3-C2-AGE1-S4" />
                            <button class="btn btn-primary gap-2" onclick="expandBadge()">
                                <i class="fas fa-expand-arrows-alt"></i>
                                Expand
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Builder Section -->
        <section id="builder" class="mb-12">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold mb-4">
                    <i class="fas fa-sliders-h mr-3 text-primary"></i>
                    Clause Configuration
                </h2>
                <p class="text-lg text-base-content/70">Select the protection level (0-9) for each clause type</p>
            </div>

            <div class="clause-grid">
                <!-- Privacy -->
                <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="avatar placeholder mr-3">
                                <div class="bg-info text-info-content rounded-full w-10">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                            </div>
                            <h3 class="card-title">Privacy (P)</h3>
                        </div>
                        <select class="select select-bordered w-full" id="privacy" onchange="updateBadge()">
                            <option value="0">Level 0 - No data collection</option>
                            <option value="1">Level 1 - Minimal collection</option>
                            <option value="2">Level 2 - Basic analytics</option>
                            <option value="3" selected>Level 3 - Standard collection</option>
                            <option value="4">Level 4 - Enhanced tracking</option>
                            <option value="5">Level 5 - Comprehensive data</option>
                            <option value="6">Level 6 - Extended profiling</option>
                            <option value="7">Level 7 - Advanced analytics</option>
                            <option value="8">Level 8 - Full spectrum data</option>
                            <option value="9">Level 9 - Maximum collection</option>
                        </select>
                    </div>
                </div>

                <!-- Liability -->
                <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="avatar placeholder mr-3">
                                <div class="bg-warning text-warning-content rounded-full w-10">
                                    <i class="fas fa-balance-scale"></i>
                                </div>
                            </div>
                            <h3 class="card-title">Liability (L)</h3>
                        </div>
                        <select class="select select-bordered w-full" id="liability" onchange="updateBadge()">
                            <option value="0">Level 0 - Full liability</option>
                            <option value="1">Level 1 - Limited exclusions</option>
                            <option value="2">Level 2 - Basic limitations</option>
                            <option value="3" selected>Level 3 - Standard limits</option>
                            <option value="4">Level 4 - Moderate protection</option>
                            <option value="5">Level 5 - Balanced approach</option>
                            <option value="6">Level 6 - Strong limitations</option>
                            <option value="7">Level 7 - Comprehensive exclusions</option>
                            <option value="8">Level 8 - Maximum protection</option>
                            <option value="9">Level 9 - Complete exclusion</option>
                        </select>
                    </div>
                </div>

                <!-- Warranty -->
                <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="avatar placeholder mr-3">
                                <div class="bg-success text-success-content rounded-full w-10">
                                    <i class="fas fa-certificate"></i>
                                </div>
                            </div>
                            <h3 class="card-title">Warranty (W)</h3>
                        </div>
                        <select class="select select-bordered w-full" id="warranty" onchange="updateBadge()">
                            <option value="0">Level 0 - Full warranty</option>
                            <option value="1">Level 1 - Limited warranty</option>
                            <option value="2">Level 2 - Basic coverage</option>
                            <option value="3" selected>Level 3 - Standard terms</option>
                            <option value="4">Level 4 - Moderate disclaimers</option>
                            <option value="5">Level 5 - Balanced approach</option>
                            <option value="6">Level 6 - Strong disclaimers</option>
                            <option value="7">Level 7 - Extensive exclusions</option>
                            <option value="8">Level 8 - Minimal warranty</option>
                            <option value="9">Level 9 - No warranty</option>
                        </select>
                    </div>
                </div>

                <!-- Termination -->
                <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="avatar placeholder mr-3">
                                <div class="bg-error text-error-content rounded-full w-10">
                                    <i class="fas fa-power-off"></i>
                                </div>
                            </div>
                            <h3 class="card-title">Termination (T)</h3>
                        </div>
                        <select class="select select-bordered w-full" id="termination" onchange="updateBadge()">
                            <option value="0">Level 0 - User-friendly terms</option>
                            <option value="1">Level 1 - Basic termination</option>
                            <option value="2">Level 2 - Standard notice</option>
                            <option value="3" selected>Level 3 - Moderate terms</option>
                            <option value="4">Level 4 - Business protection</option>
                            <option value="5">Level 5 - Balanced approach</option>
                            <option value="6">Level 6 - Strict terms</option>
                            <option value="7">Level 7 - Strong protection</option>
                            <option value="8">Level 8 - Immediate termination</option>
                            <option value="9">Level 9 - Maximum control</option>
                        </select>
                    </div>
                </div>

                <!-- Acceptable Use -->
                <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="avatar placeholder mr-3">
                                <div class="bg-primary text-primary-content rounded-full w-10">
                                    <i class="fas fa-gavel"></i>
                                </div>
                            </div>
                            <h3 class="card-title">Acceptable Use (AU)</h3>
                        </div>
                        <select class="select select-bordered w-full" id="acceptable-use" onchange="updateBadge()">
                            <option value="0">Level 0 - Minimal restrictions</option>
                            <option value="1">Level 1 - Basic guidelines</option>
                            <option value="2">Level 2 - Standard rules</option>
                            <option value="3" selected>Level 3 - Common restrictions</option>
                            <option value="4">Level 4 - Moderate policies</option>
                            <option value="5">Level 5 - Balanced rules</option>
                            <option value="6">Level 6 - Strict guidelines</option>
                            <option value="7">Level 7 - Comprehensive rules</option>
                            <option value="8">Level 8 - Extensive restrictions</option>
                            <option value="9">Level 9 - Maximum control</option>
                        </select>
                    </div>
                </div>

                <!-- User Content -->
                <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="avatar placeholder mr-3">
                                <div class="bg-secondary text-secondary-content rounded-full w-10">
                                    <i class="fas fa-user-edit"></i>
                                </div>
                            </div>
                            <h3 class="card-title">User Content (UC)</h3>
                        </div>
                        <select class="select select-bordered w-full" id="user-content" onchange="updateBadge()">
                            <option value="0">Level 0 - User retains rights</option>
                            <option value="1">Level 1 - Limited license</option>
                            <option value="2">Level 2 - Basic permissions</option>
                            <option value="3" selected>Level 3 - Standard license</option>
                            <option value="4">Level 4 - Moderate rights</option>
                            <option value="5">Level 5 - Balanced approach</option>
                            <option value="6">Level 6 - Broad license</option>
                            <option value="7">Level 7 - Extensive rights</option>
                            <option value="8">Level 8 - Comprehensive license</option>
                            <option value="9">Level 9 - Full rights transfer</option>
                        </select>
                    </div>
                </div>

                <!-- Payment -->
                <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="avatar placeholder mr-3">
                                <div class="bg-accent text-accent-content rounded-full w-10">
                                    <i class="fas fa-credit-card"></i>
                                </div>
                            </div>
                            <h3 class="card-title">Payment (PAY)</h3>
                        </div>
                        <select class="select select-bordered w-full" id="payment" onchange="updateBadge()">
                            <option value="0">Level 0 - User-friendly terms</option>
                            <option value="1">Level 1 - Basic payment terms</option>
                            <option value="2">Level 2 - Standard billing</option>
                            <option value="3" selected>Level 3 - Common practices</option>
                            <option value="4">Level 4 - Moderate terms</option>
                            <option value="5">Level 5 - Balanced approach</option>
                            <option value="6">Level 6 - Strict billing</option>
                            <option value="7">Level 7 - Strong terms</option>
                            <option value="8">Level 8 - Comprehensive rules</option>
                            <option value="9">Level 9 - Maximum protection</option>
                        </select>
                    </div>
                </div>

                <!-- Intellectual Property -->
                <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="avatar placeholder mr-3">
                                <div class="bg-info text-info-content rounded-full w-10">
                                    <i class="fas fa-lightbulb"></i>
                                </div>
                            </div>
                            <h3 class="card-title">Intellectual Property (IP)</h3>
                        </div>
                        <select class="select select-bordered w-full" id="intellectual-property" onchange="updateBadge()">
                            <option value="0">Level 0 - Minimal claims</option>
                            <option value="1">Level 1 - Basic protection</option>
                            <option value="2">Level 2 - Standard terms</option>
                            <option value="3" selected>Level 3 - Common protection</option>
                            <option value="4">Level 4 - Moderate claims</option>
                            <option value="5">Level 5 - Balanced approach</option>
                            <option value="6">Level 6 - Strong protection</option>
                            <option value="7">Level 7 - Comprehensive rights</option>
                            <option value="8">Level 8 - Extensive claims</option>
                            <option value="9">Level 9 - Maximum protection</option>
                        </select>
                    </div>
                </div>

                <!-- Disputes -->
                <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="avatar placeholder mr-3">
                                <div class="bg-warning text-warning-content rounded-full w-10">
                                    <i class="fas fa-handshake"></i>
                                </div>
                            </div>
                            <h3 class="card-title">Disputes (D)</h3>
                        </div>
                        <select class="select select-bordered w-full" id="disputes" onchange="updateBadge()">
                            <option value="0">Level 0 - User choice</option>
                            <option value="1">Level 1 - Basic resolution</option>
                            <option value="2">Level 2 - Standard process</option>
                            <option value="3" selected>Level 3 - Common terms</option>
                            <option value="4">Level 4 - Moderate requirements</option>
                            <option value="5">Level 5 - Balanced approach</option>
                            <option value="6">Level 6 - Strict process</option>
                            <option value="7">Level 7 - Mandatory arbitration</option>
                            <option value="8">Level 8 - Limited options</option>
                            <option value="9">Level 9 - Company jurisdiction</option>
                        </select>
                    </div>
                </div>

                <!-- Cookies -->
                <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="avatar placeholder mr-3">
                                <div class="bg-neutral text-neutral-content rounded-full w-10">
                                    <i class="fas fa-cookie-bite"></i>
                                </div>
                            </div>
                            <h3 class="card-title">Cookies (C)</h3>
                        </div>
                        <select class="select select-bordered w-full" id="cookies" onchange="updateBadge()">
                            <option value="0">Level 0 - No cookies</option>
                            <option value="1">Level 1 - Essential only</option>
                            <option value="2">Level 2 - Basic functionality</option>
                            <option value="3" selected>Level 3 - Standard use</option>
                            <option value="4">Level 4 - Analytics included</option>
                            <option value="5">Level 5 - Balanced approach</option>
                            <option value="6">Level 6 - Marketing cookies</option>
                            <option value="7">Level 7 - Extensive tracking</option>
                            <option value="8">Level 8 - Comprehensive data</option>
                            <option value="9">Level 9 - All cookie types</option>
                        </select>
                    </div>
                </div>

                <!-- Age Requirements -->
                <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="avatar placeholder mr-3">
                                <div class="bg-error text-error-content rounded-full w-10">
                                    <i class="fas fa-child"></i>
                                </div>
                            </div>
                            <h3 class="card-title">Age Requirements (AGE)</h3>
                        </div>
                        <select class="select select-bordered w-full" id="age-requirements" onchange="updateBadge()">
                            <option value="0">Level 0 - No restrictions</option>
                            <option value="1">Level 1 - Basic verification</option>
                            <option value="2">Level 2 - Standard compliance</option>
                            <option value="3" selected>Level 3 - COPPA compliance</option>
                            <option value="4">Level 4 - Enhanced protection</option>
                            <option value="5">Level 5 - Balanced approach</option>
                            <option value="6">Level 6 - Strict verification</option>
                            <option value="7">Level 7 - Extended requirements</option>
                            <option value="8">Level 8 - Comprehensive checks</option>
                            <option value="9">Level 9 - Maximum protection</option>
                        </select>
                    </div>
                </div>

                <!-- Severability -->
                <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="avatar placeholder mr-3">
                                <div class="bg-success text-success-content rounded-full w-10">
                                    <i class="fas fa-cut"></i>
                                </div>
                            </div>
                            <h3 class="card-title">Severability (S)</h3>
                        </div>
                        <select class="select select-bordered w-full" id="severability" onchange="updateBadge()">
                            <option value="0">Level 0 - Basic severability</option>
                            <option value="1">Level 1 - Standard terms</option>
                            <option value="2">Level 2 - Enhanced protection</option>
                            <option value="3" selected>Level 3 - Comprehensive clause</option>
                            <option value="4">Level 4 - Detailed provisions</option>
                            <option value="5">Level 5 - Balanced approach</option>
                            <option value="6">Level 6 - Strong protection</option>
                            <option value="7">Level 7 - Extensive coverage</option>
                            <option value="8">Level 8 - Maximum protection</option>
                            <option value="9">Level 9 - Complete severability</option>
                        </select>
                    </div>
                </div>
            </div>
        </section>

        <!-- Preview Section -->
        <section id="preview" class="mb-12">
            <div class="card glass shadow-2xl">
                <div class="card-body">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center">
                            <div class="avatar placeholder mr-4">
                                <div class="bg-secondary text-secondary-content rounded-full w-12">
                                    <i class="fas fa-eye text-xl"></i>
                                </div>
                            </div>
                            <div>
                                <h2 class="card-title text-2xl">Live Preview</h2>
                                <p class="text-base-content/70">See your Terms & Conditions in real-time</p>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button class="btn btn-primary gap-2" onclick="copyDocument()">
                                <i class="fas fa-copy"></i>
                                Copy
                            </button>
                            <button class="btn btn-secondary gap-2" onclick="downloadDocument()">
                                <i class="fas fa-download"></i>
                                Download
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-base-200 p-6 rounded-xl max-h-[600px] overflow-y-auto">
                        <div class="preview-content prose prose-lg max-w-none prose-headings:text-base-content prose-p:text-base-content prose-strong:text-base-content prose-li:text-base-content" id="preview-content">
                            <div class="loading text-center text-base-content/60 py-8">
                                <i class="fas fa-spinner fa-spin mr-2"></i>
                                Select clause levels to generate your Terms & Conditions...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>


    <!-- Floating Action Button -->
    <div class="floating-action">
        <div class="dropdown dropdown-top dropdown-end">
            <div tabindex="0" role="button" class="btn btn-circle btn-primary btn-lg shadow-2xl">
                <i class="fas fa-question text-xl"></i>
            </div>
            <div tabindex="0" class="dropdown-content z-[1] card card-compact w-64 p-2 shadow bg-base-100 text-base-content">
                <div class="card-body">
                    <h3 class="card-title text-sm">Quick Help</h3>
                    <p class="text-xs">
                        • Level 0-3: User-friendly<br>
                        • Level 4-6: Balanced<br>
                        • Level 7-9: Business-protective
                    </p>
                    <div class="card-actions">
                        <a href="https://github.com/cartesive/teas-and-seas" target="_blank" class="btn btn-xs btn-primary">
                            <i class="fab fa-github mr-1"></i>
                            Learn More
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <script>
        const GITHUB_RAW_BASE = 'https://api.allorigins.win/get?url=' + encodeURIComponent('https://raw.githubusercontent.com/cartesive/teas-and-seas/master/core');
        
        const CLAUSE_MAPPING = {
            'general': 'general/G',
            'privacy': 'privacy/P',
            'liability': 'liability/L', 
            'warranty': 'warranty/W',
            'termination': 'termination/T',
            'acceptable-use': 'acceptable-use/AU',
            'user-content': 'user-content/UC',
            'payment': 'payment/PAY',
            'intellectual-property': 'intellectual-property/IP',
            'disputes': 'disputes/D',
            'cookies': 'cookies/C',
            'age-requirements': 'age-requirements/AGE',
            'severability': 'severability/S'
        };

        let documentCache = {};
        let currentDocument = '';

let CLAUSE_DATA;

// Load the data
fetch('./data.json')
  .then(response => response.json())
  .then(data => {
    CLAUSE_DATA = data;
    // Initialize your app here after data is loaded
    initializeApp();
  })
  .catch(error => console.error('Error loading data:', error));



        async function fetchClause(clauseType, level) {
            const key = `${clauseType}-${level}`;
            if (documentCache[key]) {
                return documentCache[key];
            }

            try {
                if (CLAUSE_DATA[clauseType] && CLAUSE_DATA[clauseType][level]) {
                    const content = CLAUSE_DATA[clauseType][level];
                    console.log(`✅ Loaded ${clauseType} level ${level} from embedded data`);
                    documentCache[key] = content;
                    return content;
                } else {
                    throw new Error(`No data found for ${clauseType} level ${level}`);
                }
            } catch (error) {
                console.error(`Error loading ${clauseType} level ${level}:`, error);
                return `[Error: Could not load ${clauseType.replace('-', ' ')} clause level ${level}]`;
            }
        }

                function updateBadge() {
            const levels = {};
            Object.keys(CLAUSE_MAPPING).forEach(clauseType => {
                if (clauseType === 'general') {
                    // General section is always level 0 and not user-selectable
                    levels[clauseType] = '0';
                } else {
                    const element = document.getElementById(clauseType);
                    if (element) {
                        levels[clauseType] = element.value;
                    } else {
                    }
                }
            });

            // Exclude general from badge (since it's always included)
            const badgeText = Object.keys(CLAUSE_MAPPING)
                .filter(clauseType => clauseType !== 'general')
                .map(clauseType => {
                    const prefix = CLAUSE_MAPPING[clauseType].split('/')[1];
                    return `${prefix}${levels[clauseType]}`;
                }).join('-');

            document.getElementById('generated-badge').textContent = badgeText;
            generatePreview();
        }


        async function generatePreview() {
            const previewElement = document.getElementById('preview-content');
            previewElement.innerHTML = '<div class="loading text-center text-base-content/60 py-8"><i class="fas fa-spinner fa-spin mr-2"></i>Generating document...</div>';

            try {
                const clauses = [];
                
                // Debug: Check if general section exists
                console.log('Checking for general section in CLAUSE_DATA:', 'general' in CLAUSE_DATA);
                console.log('General section data:', CLAUSE_DATA.general);
                
                // Add General section first (always level 0)
                const generalText = await fetchClause('general', '0');
                console.log('General text fetched:', generalText.substring(0, 100) + '...');
                clauses.push(`## About This Agreement\n\n${generalText}`);
                
                // Add other clauses based on user selection
                for (const clauseType of Object.keys(CLAUSE_MAPPING)) {
                    if (clauseType === 'general') continue; // Skip general as we already added it
                    
                    const selectElement = document.getElementById(clauseType);
                    if (selectElement) {
                        const level = selectElement.value;
                        const clauseText = await fetchClause(clauseType, level);
                        const sectionTitle = clauseType.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
                        clauses.push(`## ${sectionTitle}\n\n${clauseText}`);
                    }
                }

                currentDocument = `# Terms & Conditions\n\n${clauses.join('\n\n---\n\n')}`;
                
                // Render markdown to HTML for beautiful display
                const renderedHTML = marked.parse(currentDocument);
                previewElement.innerHTML = renderedHTML;
                updateDebug('Preview complete!');
            } catch (error) {
                updateDebug(`ERROR: ${error.message}`);
                console.error('Error generating preview:', error);
                const errorDetails = `Error: ${error.message}\n\nStack: ${error.stack}\n\nGeneral section exists: ${'general' in CLAUSE_DATA}`;
                previewElement.innerHTML = `<div class="alert alert-error"><i class="fas fa-exclamation-triangle mr-2"></i>Error generating document: ${error.message}<br><pre style="font-size: 0.8em; margin-top: 10px;">${errorDetails}</pre></div>`;
            }
        }

        async function generateFullDocument() {
            await generatePreview();
        }

        function copyBadge() {
            const badge = document.getElementById('generated-badge').textContent;
            navigator.clipboard.writeText(badge).then(() => {
                alert('Badge copied to clipboard!');
            });
        }

        function copyDocument() {
            if (currentDocument) {
                navigator.clipboard.writeText(currentDocument).then(() => {
                    alert('Document copied to clipboard!');
                });
            }
        }

        function downloadDocument() {
            if (currentDocument) {
                const blob = new Blob([currentDocument], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'terms-and-conditions.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
        }

        async function expandBadge() {
            const badgeInput = document.getElementById('badge-input').value.trim();
            if (!badgeInput) {
                alert('Please enter a badge to expand');
                return;
            }

            try {
                const parts = badgeInput.split('-');
                const prefixMap = {
                    'P': 'privacy',
                    'L': 'liability', 
                    'W': 'warranty',
                    'T': 'termination',
                    'AU': 'acceptable-use',
                    'UC': 'user-content',
                    'PAY': 'payment',
                    'IP': 'intellectual-property',
                    'D': 'disputes',
                    'C': 'cookies',
                    'AGE': 'age-requirements',
                    'S': 'severability'
                };

                // Parse badge and set selectors
                parts.forEach(part => {
                    const match = part.match(/^([A-Z]+)(\d)$/);
                    if (match) {
                        const [, prefix, level] = match;
                        const clauseType = prefixMap[prefix];
                        if (clauseType) {
                            document.getElementById(clauseType).value = level;
                        }
                    }
                });

                updateBadge();
                alert('Badge expanded successfully!');
            } catch (error) {
                alert('Invalid badge format. Please use format like: P3-L7-W2-T5-AU4-UC6-PAY8-IP5-D3-C2-AGE1-S4');
            }
        }

        // Configure marked.js for better rendering
        marked.setOptions({
            breaks: true,
            gfm: true,
            headerIds: false,
            mangle: false
        });

        // Initialize
        updateDebug('Page loaded, calling updateBadge()');
        updateBadge();
    </script>
</body>
</html>
